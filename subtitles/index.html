<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subtitles for SendBird Calls</title>

    <script src="./node_modules/socket.io/client-dist/socket.io.js"></script>

    <!--
        BOOTSTRAP
    -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <script src="./node_modules//sendbird-calls//SendBirdCall.min.js"></script>

    <link rel="stylesheet" href="index.css">

    <style>
        video {
            width: 300px;
        }
        ._invisible {
            display:none;
        }
        .speechRecognitionIndicatorOff{
            opacity: 0;
        }
    </style>


</head>
<body>

    <div class="w-100 h-100 d-flex justify-content-center align-content-center">

        <div>                 
            <!--
                Title
            -->
            <h1 class="mt-4">
                Subtitles for Sendbird Calls SDK
            </h1>
            <!--
                Login - authorization
            -->
            <div class="card mt-4" id="loginDiv">
                <div class="card-header">
                    Connect
                </div>
                <div class="card-body">
                    <table align="center">
                        <tr>
                            <td>
                                Sendbird Application ID: &nbsp;
                            </td>
                            <td>
                                <input type="text" class="form-control" id="app_id" value="6A6CF887-E6F6-4763-84B6-BEFD2410EE42" placeholder="APP ID" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Sendbird User ID: &nbsp;
                            </td>
                            <td>
                                <input type="text" class="form-control mt-2" id="user_id" value="walter2" placeholder="User ID" />    
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="card-footer text-center">
                    <button class="btn btn-primary" onclick="connect()" id="btnConnect">
                        Connect to SendBird Calls!
                    </button>
                </div>
            </div>

            <!--
                Main Menu
            -->
            <div class="card mt-4" id="mainMenu">
                <div class="card-header">
                    Make a Call and translate / caption your voice
                </div>
                <div class="card-body">
                    <!--
                        Display error messages
                    -->
                    <div class="mb-4 text-danger" id="logError"></div>
                    <div class="mb-4 text-success" id="logSuccess"></div>

                    <div class="row">
                        <div class="col">
                            <!--
                                YOUR VIDEO
                            -->
                            <video id="local_video_element_id" autoplay class="border" muted />
                        </div>
                        <div class="col">
                            <!--
                                REMOTE VIDEO
                            -->
                            <video id="remote_video_element_id" autoplay class="border" />
                        </div>
                    </div>

                    <table style="margin:1rem;"><tr>
                        <td>
                            Your language: <select id="languageSelector" onchange="updateLanguage()">
                                <option value="es">Español</option>
                                <option value="en">English</option>
                                <option value="de">Deutsch</option>
                                <option value="fr">Français</option>
                                <option value="it">Italiano</option>
                                <option value="hu">Magyar</option>
                                <option value="no">Norsk</option>
                                <option value="pl">Polski</option>
                                <option value="pt">Português</option>
                                <option value="sv">Svenska</option>
                                <option value="ar">العربية</option>
                                <option value="cmn">中文</option>
                                <option value="he">עברית</option>
                                <option value="ja">日本語</option>
                                <option value="ko">한국어</option>
                                <option value="ru">Pусский</option>
                            </select>        
                        </td>
                        <td>
                            <div class="uk-panel uk-panel-box uk-panel-box-primary speechRecognitionIndicatorOff" id="speechRecognitionIndicator">
                                SENDING YOUR VOICE TO THE SERVER... 
                            </div>        
                        </td>
                        <td>
                            <div id="remoteArea"></div>
                        </td>
                        <td>
                            <div id="speechRecognitionIndicator" class="speechRecognitionIndicatorOff"></div>
                        </td>
                    </tr></table>       

                </div>
                <div class="card-footer d-flex justify-content-center">

                    <div class="d-flex justify-content-center" id="makeCallPanel">
                        <!--
                            MAKE CALL BUTTON
                        -->
                        <button class="btn btn-success ml-3" onclick="makeCall()" id="butMakeCall">
                            Make Call
                        </button>    
                    </div>

                    <div class="d-flex justify-content-center" id="receiveCallPanel">
                        <!--
                            END CALL
                        -->    
                        <button class="btn btn-danger ml-3" onclick="endCall()" id="butEndCall">
                            End Call
                        </button>                
                    </div>

                </div>

            </div>
        </div>
    </div>    
    
    <script src="./index.js"></script>
    <script src="./adapter.js"></script>
    <script src="./recognition.js"></script>
    <script src="./peer-connection.js"></script>
    <script src="./data-channel.js"></script>
    <script src="./subtitles.js"></script>

</body>
</html>